/* KhayCake by TheB1ackSheep, Front-End Developer 2015-04-27 */
var KhayCake=KhayCake||{parameters:[],AJAX:function a(b,c,d,e){var f=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Msxml2.XMLHTTP"):new ActiveXObject("Microsoft.XMLHTTP");f.onreadystatechange=function(){if(f.readyState===4){if(f.status===200){if(typeof e==="object"&&e.success)e.success(f.response)}else{if(typeof e==="object"&&e.error)e.error(f.response)}}};var g="",h=0;for(var i in d)g+=i+"="+d[i]+(h++<Object.keys(d).length-1?"&":"");f.open(b,c+(d&&b==="GET"?"?"+g:""));if(b==="POST")f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.send(b==="POST"?g:null)},doAjax:function(){var a=window.location.hash.substr(2);var b=a.split("/")[1];switch(b){case"shop":this.openShop(this.parameters);this.filterShop();break;default:this.closeShop(this.parameters);break}},forEach:function(a,b){[].forEach.call(a,b)},setParameter:function(a,b){this.parameters[a]=b},getParameter:function(a){return this.parameters[a]},classList:function(a){if(a&&a.classList)return function(){this.add=function(b){a.classList.add(b)};this.remove=function(b){a.classList.remove(b)};this.toggle=function(b){a.classList.toggle(b)}};else if(a&&a.className)return function(){this.add=function(b){var c=a.className;if(!c.contains(b))a.setAttribute("class",c+" "+b)};this.remove=function(b){var c=a.className;if(c.contains(b))c.replace(b," ");a.setAttribute("class",c)};this.toggle=function(b){var c=a.className;if(c.contains(b))this.remove(b);else this.add(b)}}},openShop:function(a){document.querySelector(".modal.shop .row").innerHTML="";var b=window.location.hash;var c=b.substr(2).split("/")[2];this.forEach(document.querySelectorAll(".modal.shop .tab a"),function(a){if(a.classList)a.classList.remove("active")});var d=document.querySelector(".modal.shop .tab a."+c);if(d.classList)d.classList.add("active");this.filterShop();if(!document.querySelector(".modal.shop").classList.contains("open")){var e;if(a&&a.buyBtn)e=a.buyBtn.getBoundingClientRect();else{var f=document.body.getBoundingClientRect();e={top:f.height/2,right:f.width/2,bottom:f.height/2,left:f.width/2,width:0,height:0}}var g=document.querySelector(".modal.shop");g.classList.add("open");g.style.top=e.top+"px";g.style.right=e.right+"px";g.style.bottom=e.bottom+"px";g.style.left=e.left+"px";g.style.height=e.height+"px";g.style.width=e.width+"px";g.style.backgroundColor="#3E2723";g.style.transition="top 250ms,right 250ms,bottom 250ms,left 250ms,width 250ms,height 250ms";setTimeout(function(){g.style.top="0px";g.style.right="0px";g.style.bottom="0px";g.style.left="0px";g.style.height="100%";g.style.width="100%";g.querySelector(".container").classList.remove("hide");setTimeout(function(){K.forEach(g.querySelectorAll(".tab a"),function(a){a.classList.remove("hide")})},100)},100)}},filterShop:function(){var a=window.location.hash;var b=a.substr(2).split("/")[2];K.forEach(document.querySelectorAll(".modal.shop .tab .row .box"),function(a){a.classList.add("hide");setTimeout(function(){a.parentNode.remove(a)},350)});document.querySelector(".modal.shop .tab .row").innerHTML="<span class='loader'><span class='loader-inner'></span></span>";setTimeout(function(){var a=null;if(b=="cup-cake")a=K.getCupcake();else if(b=="crape-cake")a=K.getCrapeCake();else if(b=="brownie-cake")a=K.getBrownieCake();else if(b=="party-cake")a=K.getPartyCake();else if(b=="cart")a=K.getCheckout();if(a!=null){var c=document.querySelector(".modal.shop .tab .row");c.innerHTML=a}var d=document.querySelectorAll(".modal.shop .tab .box");var e=0;(function f(a){if(a<d.length){var b=d[a++];setTimeout(function(){b.classList.remove("hide");f(a)},100)}})(e)},1e3)},closeShop:function(a){var b=document.querySelector(".modal.shop");b.querySelector(".container").classList.add("hide");b.classList.remove("open");var c;if(a&&a.buyBtn)c=a.buyBtn.getBoundingClientRect();else{var d=document.body.getBoundingClientRect();c={top:d.height/2,right:d.width/2,bottom:d.height/2,left:d.width/2,width:0,height:0}}b.style.top=c.top+"px";b.style.right=c.right+"px";b.style.bottom=c.bottom+"px";b.style.left=c.left+"px";b.style.height=c.height+"px";b.style.width=c.width+"px";setTimeout(function(){b.setAttribute("style","");K.forEach(document.querySelectorAll(".shop .tab a"),function(a){if(a.classList)a.classList.add("hide")})},500)},getCupcake:function(){return'<div class="box cake-box cup-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crushed Peanut</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+' <div class="box cake-box cup-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crushed Peanut</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+' <div class="box cake-box cup-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crushed Peanut</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+' <div class="box cake-box cup-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crushed Peanut</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+' <div class="box cake-box cup-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crushed Peanut</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'},getCrapeCake:function(){return'<div class="box cake-box crape-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crape Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box crape-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crape Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box crape-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crape Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box crape-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crape Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box crape-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Crape Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'},getBrownieCake:function(){return'<div class="box cake-box brownie-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Brownie Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box brownie-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Brownie Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box brownie-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Brownie Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box brownie-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Brownie Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box brownie-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Brownie Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'},getPartyCake:function(){return'<div class="box cake-box party-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Party Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box party-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Party Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box party-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Party Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box party-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Party Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'+'<div class="box cake-box party-cake hide"><div class="img"><img src="images/cupcake.jpg" alt=""/></div><div class="title">Party Cake</div><div class="add-cart"><div class="price">&#3647;56</div><div>Add to Cart</div></div></div>'},getCheckout:function(){return'<div class="box checkout_box hide"><table><thead><tr><th></th><th>Your order</th><th>Price</th></tr></thead><tbody><tr><th>1x</th><td>Crushed Peanut</td><td>$56</td></tr><tr><th>2x</th><td>Your order</td><td>Price</td></tr><tr><th>1x</th><td>Your order</td><td>Price</td></tr></tbody><tfoot><tr><th></th><th class="text-right">Total</th><th class="text-right">$56</th></tr></tfoot></table></div>'}};var K=KhayCake;document.addEventListener("DOMContentLoaded",function(){window.addEventListener("hashchange",function(){K.doAjax()});if(window.location.hash){K.doAjax()}[].forEach.call(document.querySelectorAll(".box .btn"),function(a){a.addEventListener("click",function(){K.setParameter("buyBtn",this)})});document.querySelector(".checkout").addEventListener("click",function(){this.classList.toggle("active")})});