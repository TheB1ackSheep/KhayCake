/* KhayCake by TheB1ackSheep, Front-End Developer 2015-05-04 */
var K;$(document).ready(function(){var a=$(".dialog");var b=$(".section-price");var c=$(".section-price");var d=d||{params:[],getParam:function(a){return this.params[a]},setParam:function(a,b){this.params[a]=b},isInteger:function(a){return a?a.toString().match(/^[0-9]+$/)!==null:false},isFloat:function(a){return a?(this.isInteger(a.toString())||a.toString().match(/^\.[0-9]+$/)||a.toString().match(/^[0-9]+\.[0-9]+$/))!==null:false}};d.home=function(){$(c).html('<div class="cake">'+'<div class="cake-box">'+'<div class="cake-box-img">'+'<img src="images/khaycake-cupcake.png"/>'+"</div>"+'<div class="cake-box-name font-lily">Cupcake</div>'+'<div class="cake-box-detail secondary-text">คัพเค้กนมสด คุณภาพล้นถ้วย อร่อยไปกับเนื้อเค้กนมสด และวิปครีมไขมันต่ำหลากรสให้ท่านได้เลือกสรร พร้อมเป็นของขวัญสำหรับคนที่คุณรัก</div>'+'<div class="cake-box-buy"><a href="#!/cakes/cupcake" class="btn btn-primary">BUY NOW</a></div>'+"</div>"+'<div class="cake-box">'+'<div class="cake-box-img">'+'<img src="images/khaycake-crabecake-white.png"/>'+"</div>"+'<div class="cake-box-name font-lily">Crapecake</div>'+'<div class="cake-box-detail secondary-text">สัมผัสกับความนุ่มละมุนของชั้นแป้งเนยสดสลับกับชั้นครีมหอมหวานละลานในปาก ราดด้วยสตอเบอร์รี่ไซรัปที่ตัดกับรสเค้กอย่างลงตัว</div>'+'<div class="cake-box-buy"><a href="#!/cakes/crapecake" class="btn btn-primary">BUY NOW</a></div>'+"</div>"+'<div class="cake-box">'+'<div class="cake-box-img">'+'<img src="images/khaycake-logo-mask.png"/>'+"</div>"+'<div class="cake-box-name font-lily">Brownie</div>'+'<div class="cake-box-detail secondary-text">บราวนี่อุ่นๆจากเตา หอมกลุ่น กลมกล่อมไปกับรสช็อกโกแลตเข้มข้นที่โรยหน้าด้วยอัลมอนด์คัดสรรพิเศษ พร้อมเสิร์ฟให้คุณได้ลิ้มลองทุกวัน</div>'+'<div class="cake-box-buy"><a href="#!/cakes/brownie" class="btn btn-primary">BUY NOW</a></div>'+"</div>"+'<div class="cake-box">'+'<div class="cake-box-img">'+'<img src="images/khaycake-logo-mask.png"/>'+"</div>"+'<div class="cake-box-name font-lily">Party Cake</div>'+'<div class="cake-box-detail secondary-text">ให้งานปาร์ตี้ของคุณหอมกรุ่นไปด้วยไอของขนมเค้กสุดพิเศษ ที่จะทำให้คุณและเพื่อน ๆ ในงานปาร์ตี้ของคุณไม่มีวันลืม ด้วยสีสันและรสชาติที่ไม่อาจลืม</div>'+'<div class="cake-box-buy"><a  href="#!/cakes/partycake" class="btn btn-primary">BUY NOW</a></div>'+"</div>"+"</div>")};d.cakes=function(a,b){$(c).html(d.container());d.loadingMask($("#cake-container"));var e="";console.log(a);switch(a){case"cupcake":Product.cupcake(function(a){if(a.message&&a.message.length>0){for(var c in a.message){var d=a.message[c];e+=Product.box(d)}}else{e+='<div class="col-sm-12"><div class="box">ไม่มีสินค้าในระบบ</div></div>'}if(typeof b==="function")b(e)});break;case"crapecake":Product.crapecake(function(a){if(a.message&&a.message.length>0){for(var c in a.message){var d=a.message[c];e+=Product.box(d)}}else{e+='<div class="col-sm-12"><div class="box">ไม่มีสินค้าในระบบ</div></div>'}if(typeof b==="function")b(e)});break;case"brownie":Product.brownie(function(a){if(a.message&&a.message.length>0){for(var c in a.message){var d=a.message[c];e+=Product.box(d)}}else{e+='<div class="col-sm-12"><div class="box">ไม่มีสินค้าในระบบ</div></div>'}if(typeof b==="function")b(e)});break;case"partycake":Product.partycake(function(a){if(a.message&&a.message.length>0){for(var c in a.message){var d=a.message[c];e+=Product.box(d)}}else{e+='<div class="col-sm-12"><div class="box">ไม่มีสินค้าในระบบ</div></div>'}if(typeof b==="function")b(e)});break;default:Product.all(function(a){if(a.message&&a.message.length>0){for(var c in a.message){var d=a.message[c];e+=Product.box(d)}}else{e+='<div class="col-sm-12"><div class="box">ไม่มีสินค้าในระบบ</div></div>'}if(typeof b==="function")b(e)});break}};d.container=function(){return'<div class="row">'+'<div class="col-md-2">'+'<ul class="nav nav-pills nav-stacked">'+'<li role="presentation" id="all"><a href="#!/cakes/all">All</a></li>'+'<li role="presentation" id="cupcake"><a href="#!/cakes/cupcake">Cupcake</a></li>'+'<li role="presentation" id="crapecake"><a href="#!/cakes/crapecake">Crape Cake</a></li>'+'<li role="presentation" id="brownie"><a href="#!/cakes/brownie">Brownie</a></li>'+'<li role="presentation" id="partycake"><a href="#!/cakes/partycake">Party Cake</a></li>'+"</ul>"+"</div>"+'<div class="col-md-10">'+'<div id="cake-container" class="row"></div>'+"</div>"+"</div>"};d.cakes.bind=function(){var a=window.location.hash.substr(2);var b=a.split("/");var c=null;if(b.length>=3)c=b[2];$(".section-price .nav li").removeClass("active");$(".section-price .nav li"+"#"+c).addClass("active");$("#cake-container .cart-add").on("submit",function(){e.addItem($(this).parent());return false})};d.login=function(){$(c).html(d.login.form())};d.login.form=function(){return'<form id="form-login">'+'<div class="form-group">'+"<label>Username :</label>"+'<input class="form-control" id="email" placholder="ninecake@khaycake.com"/>'+"</div>"+'<div class="form-group">'+"<label>Password :</label>"+'<input class="form-control" id="pwd" type="password"/>'+"</div>"+'<div class="form-group">'+'<button class="btn btn-primary">Login</button>'+"</div>"+"</form>"};d.onHashChanged=function(){var a=window.location.hash.substr(2).split("/");var b=a[1];switch(b){case"cakes":var c=null;if(a.length>=3)c=a[2];d.cakes(c,function(a){$("#cake-container").html(a);d.cakes.bind();d.loadedMask()});break;case"login":d.login();break;default:d.home();break}};d.loadingMask=function(a){$(a).html("<div class='col-sm-12' style='text-align: center;overflow: hidden'><span class='loader'><span class='loader-inner'></span></span></div>")};d.loadedMask=function(a){$(a).html("")};var e=e||{ID_CART:".cart-button",ID_CART_ICON:".cart-button .cart-open",ID_CART_CLOSE:".order-item .cart-close",total:0,isOpen:function(){return $(this.ID_CART).hasClass("open")},open:function(){$(this.ID_CART).addClass("open")},close:function(){$(this.ID_CART).removeClass("open")},addItem:function(a){if($(a).hasClass("box")){console.log(this.ID_CART_ICON);var b=$('<div id="clone"></div>');var c=$(a)[0].getBoundingClientRect();var d=false;if($(this.ID_CART).hasClass("inactive")){$(this.ID_CART).removeClass("inactive");d=true}setTimeout(function(){var d=$(e.ID_CART_ICON)[0].getBoundingClientRect();b.html($(a).find(".box-img").clone()).appendTo("body");b.css({top:c.top,left:c.left,width:c.width,opacity:1});b.animate({top:d.top-60,left:0,width:"53px"},500,function(){b.animate({top:d.top,opacity:0},300,function(){b.remove()})})},d?0:0)}}};$(window).bind("hashchange",function(){d.onHashChanged()});if(window.location.hash){d.onHashChanged()}$(".cake-box-buy a").click(function(a){d.setParam(Dialog.PARAM_BEGIN_POS,this)});$(e.ID_CART_ICON).click(function(){e.open()});$(e.ID_CART_CLOSE).click(function(){e.close()});K=d});